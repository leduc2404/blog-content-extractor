<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog Content Extractor</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="header">
        <div class="header-icon">ğŸ“</div>
        <div>
          <h1>Content Extractor</h1>
          <p class="subtitle">TrÃ­ch xuáº¥t ná»™i dung â†’ Markdown</p>
        </div>
        <button id="btn-settings" class="settings-btn" title="CÃ i Ä‘áº·t API Key">âš™ï¸</button>
      </div>

      <!-- Settings Panel (hidden by default) -->
      <div id="settings-panel" class="settings-panel hidden">
        <div class="settings-header">âš™ï¸ CÃ i Ä‘áº·t Gemini AI</div>
        <div class="settings-row">
          <label for="api-key-input">Gemini API Key</label>
          <input
            type="password"
            id="api-key-input"
            placeholder="AIza..."
            autocomplete="off"
            spellcheck="false"
          />
        </div>
        <button id="btn-save-key" class="save-key-btn">ğŸ’¾ LÆ°u API Key</button>
        <p class="settings-hint">
          Láº¥y API key miá»…n phÃ­ táº¡i
          <a href="https://aistudio.google.com/apikey" target="_blank">aistudio.google.com</a>
        </p>
      </div>

      <!-- Mode Selection -->
      <div class="mode-section">
        <button id="btn-full-page" class="mode-btn active" title="ToÃ n bá»™ trang">
          ğŸ“„ ToÃ n trang
        </button>
        <button id="btn-selection" class="mode-btn" title="Chá»n vÃ¹ng ná»™i dung">
          âœ‚ï¸ Chá»n vÃ¹ng
        </button>
      </div>

      <!-- Options -->
      <div class="options">
        <label class="option-row">
          <input type="checkbox" id="opt-images" checked />
          <span>ğŸ–¼ï¸ Láº¥y URL áº£nh</span>
        </label>
        <label class="option-row">
          <input type="checkbox" id="opt-links" checked />
          <span>ğŸ”— Giá»¯ link</span>
        </label>
        <label class="option-row">
          <input type="checkbox" id="opt-tables" checked />
          <span>ğŸ“Š Chuyá»ƒn báº£ng</span>
        </label>
        <label class="option-row">
          <input type="checkbox" id="opt-frontmatter" checked />
          <span>ğŸ“‹ ThÃªm frontmatter</span>
        </label>
      </div>

      <!-- Extract Button -->
      <button id="btn-extract" class="extract-btn">
        <span class="extract-icon">ğŸš€</span>
        TrÃ­ch xuáº¥t ná»™i dung
      </button>

      <!-- Status -->
      <div id="status" class="status hidden"></div>

      <!-- Result -->
      <div id="result-section" class="result-section hidden">
        <div class="result-header">
          <span class="result-title">ğŸ“‹ Káº¿t quáº£ Markdown</span>
          <div class="result-actions">
            <button id="btn-copy" class="action-btn" title="Copy">ğŸ“‹ Copy</button>
            <button id="btn-download" class="action-btn" title="Táº£i file .md">ğŸ’¾ Táº£i .md</button>
          </div>
        </div>
        <textarea id="result-text" class="result-text" readonly></textarea>
        <div class="result-stats">
          <span id="stat-chars">0 kÃ½ tá»±</span>
          <span id="stat-images">0 áº£nh</span>
          <span id="stat-links">0 link</span>
        </div>

        <!-- AI Processing Panel -->
        <div id="ai-panel" class="ai-panel">
          <div class="ai-panel-title">âœ¨ Xá»­ lÃ½ báº±ng AI</div>
          <p class="ai-panel-desc">
            AI sáº½ tá»± Ä‘á»™ng: phÃ¢n loáº¡i &amp; gáº¯n tags, viáº¿t láº¡i ná»™i dung tá»± nhiÃªn hÆ¡n,
            xoÃ¡ cÃ¡c Ä‘iá»u hÆ°á»›ng/quáº£ng cÃ¡o website gá»‘c.
          </p>
          <div class="ai-actions">
            <button id="btn-ai-full" class="ai-btn ai-btn-primary">
              ğŸ¤– Xá»­ lÃ½ &amp; Viáº¿t láº¡i toÃ n bá»™
            </button>
            <button id="btn-ai-clean" class="ai-btn ai-btn-secondary">
              ğŸ§¹ Chá»‰ dá»n &amp; phÃ¢n loáº¡i
            </button>
          </div>
          <div id="ai-status" class="ai-status hidden"></div>
        </div>
      </div>

      <!-- Selection overlay info -->
      <div id="selection-info" class="selection-info hidden">
        ğŸ’¡ Click vÃ o vÃ¹ng ná»™i dung trÃªn trang web Ä‘á»ƒ chá»n. Nháº¥n <b>ESC</b> Ä‘á»ƒ há»§y.
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
